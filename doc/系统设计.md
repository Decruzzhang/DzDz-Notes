## . 系统设计文档标准

### 1.1. Revision Record 修订记录



| 编号 | 日期 | 修改版本号 | 修改章节 | 修改描述 | 作者 |
| ---- | ---- | ---------- | -------- | -------- | ---- |
|      |      |            |          |          |      |
|      |      |            |          |          |      |
|      |      |            |          |          |      |
|      |      |            |          |          |      |
|      |      |            |          |          |      |



##  2. 介绍

### 2.1. 背景

主要介绍与该系统相关一些历史现状，包括相关的业务状态和需求，及涉及到的组织架构和人员角色。

### 2.2. 设计目标

从系统外来描述系统带来的收益。比如：

A. 系统的性能

B. 系统的可括性和容灾

C. 系统的可运维

### 2.3. 术语定义及说明

列出本文档中用到的可能会引起混淆的专门术语、定义和缩写词的原文。

## 3. 产品需求

## 4. 总体设计

### 4.1. 领域模型

1. 1. 描述逻辑模型和物理模型，以及逻辑模型和物理模型的关系（映射关系，聚合关系等）。注：主要从抽象的本质来描述系统。

### 4.2. 逻辑架构

1. 1. 描述系统被切分的逻辑组件，组件的功能和职责，以及组件之间的协作关系。需 要有逻辑架构图。注：从系统内部角度来描述系统的的构成

### 4.3. 物理架构

1. 1. 描述服务的功能和职责，服务之间的协作关系。需要有物理架构图。注：以服务为粒度来描述系统，如果无物理架构可以不写。

### 4.4. 协议设计

包括服务和服务的协议，模块和模块的协议。主要包括协议头，协议体。描述协议各字段的语义，数据类型。注：无协议设计，该小节可以不写。

### 4.5. 算法设计

描述和架构相关的的算法。除了描述算法逻辑步骤外，还需要描述该算法在该设计中的应用场景（比如paxos算法在zookeeper中主要是用来选leader）。

## 5. 子系统设计

### 5.1. 模块设计x1

包括：

- - 功能分析
  - 接口设计
  - 类关系图分析
  - 接口调用时序图
  - 数据结构和算法
  - 线程模型：描述线程和线程之间的关系（同步和异步），线程和读写的关系，线程和io的关系，线程和消息关系等。注：如果没有，该小节可以不写

### 5.2. 模块设计x2

包括：

- - 功能分析
  - 接口设计
  - 类关系图分析
  - 接口调用时序图
  - 数据结构和算法
  - 线程模型：描述线程和线程之间的关系（同步和异步），线程和读写的关系，线程和io的关系，线程和消息关系等。注：如果没有，该小节可以不写

## 6. 系统用例

### 6.1. 系统用例x1

包括：

1. 1. 描述用例用途
   2. 描述用例事件流
   3. 画出用例时序图

 

### 6.2. 系统用例x2

包括：

1. 1. 描述用例用途
   2. 描述用例事件流
   3. 画出用例时序图

 

## 7. 系统API说明

制作一个URL链接到详细的API文档说明。

## 8. 边界和指标

### 8.1. 系统边界说明

详细描述系统所受的内部和外部条件的约束和限制说明。

例如：

1. 1. qps限制
   2. 数据容量限制

### 8.2. 系统指标说明

主要从系统可靠性、可用性、可运维性、性能等来描述我们的系统

例如：

1. 1. 数据可靠性（10个9）
   2. 可用性（5个9）
   3. latency（同机房99% 1ms）
   4. 启动延迟（5s中）

注：系统所访问的硬件性能也可以在这里说明

## 9. 运行环境要求

包括：

1. 1. 软件要求：依赖库、操作系统、数据库、中间件
   2. 硬件要求：内存、cpu、磁盘网络、跨交换机、跨机房

## 10. 发布、运维、监控

### 10.1. 包发布

包括：

1. 1. binary和配置的管理和发布流程
   2. 灰度过程（没有可以不写）
   3. 流量切换（没有可以不写）
   4. 数据预热（没有可以不写）

### 10.2. 运维

包括：

1. 1. 硬件故障解决方案：机器、网络、交换机、机房
   2. 软件故障解决方案：依赖的第三方软件、操作系统、服务自身down
   3. 扩容和机器下线方案
   4. 外部数据异常方案：流量和qps超限

### 10.3. 监控

包括：

1. 1. 系统监控：cpu、内存、网络、磁盘
   2. 业务监控：（业务数据的指标监控，没有可以不写）
   3. 进程监控
   4. 端口监控

